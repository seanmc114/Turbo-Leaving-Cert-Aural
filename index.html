<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Turbo Aural</title>

  <!-- Cache-buster: change TAURAL_CLEAN_2 to _3 if you don't see updates -->
  <link rel="stylesheet" href="./style.css?v=TAURAL_CLEAN_2" />
</head>

<body>
  <!-- Crest watermark: put crest.png in the same folder -->
  <div class="crest-watermark" aria-hidden="true"></div>

  <main class="wrap">
    <header class="topbar">
      <div class="brand">
        <div class="brandMark" aria-hidden="true">TA</div>
        <div class="brandText">
          <h1>Turbo Aural</h1>
          <p class="sub">LC Spanish listening practice ‚Äî anywhere, anytime</p>
        </div>
      </div>

      <div class="pills">
        <span class="pill" id="pillYear">Year: ‚Äî</span>
        <span class="pill" id="pillPaper">Paper: ‚Äî</span>
        <span class="pill" id="pillMode">Mode: ‚Äî</span>
      </div>
    </header>

    <!-- HOME -->
    <section class="card" id="screenHome">
      <div class="cardHead">
        <h2>Setup</h2>
        <p class="muted">
          Solo practice needs <b>no code</b>. For class competitions, use a <b>Match Code</b> so everyone gets the same prompts.
        </p>
      </div>

      <div class="grid">
        <div class="field">
          <label for="yearSelect">Exam year</label>
          <select id="yearSelect"></select>
        </div>

        <div class="field">
          <label for="paperSelect">Paper level</label>
          <select id="paperSelect">
            <option value="higher">Higher (HL)</option>
            <option value="ordinary">Ordinary (OL)</option>
          </select>
        </div>

        <div class="field">
          <label for="levelSelect">Turbo level (1 easy ‚Üí 10 tough)</label>
          <select id="levelSelect"></select>
        </div>

        <div class="field">
          <label for="modeSelect">Mode</label>
          <select id="modeSelect">
            <option value="classic">Classic</option>
            <option value="sprint">Sprint (time cap)</option>
            <option value="survival">Survival (0 wrong)</option>
            <option value="relay">Relay (A then B)</option>
          </select>
        </div>

        <div class="field span2">
          <label>Quick links</label>
          <div class="btnRow">
            <button class="btn soft" id="openAudioBtn" type="button">Open Audio (EducatePlus)</button>
            <button class="btn soft" id="openPaperBtn" type="button">Open Paper (Exams.ie)</button>
          </div>
          <p class="hint">Tip: open audio and paper in separate tabs.</p>
        </div>

        <div class="field span2">
          <label>Match Code (optional)</label>
          <div class="btnRow">
            <input id="matchInput" maxlength="7" placeholder="Enter 7-char match code" />
            <button class="btn primary" id="joinBtn" type="button">Join</button>
            <button class="btn primary" id="newMatchBtn" type="button">Generate</button>
            <button class="btn ghost" id="soloBtn" type="button">Solo</button>
          </div>
          <div class="miniRow">
            <span class="mini" id="matchPreview">Match: ‚Äî</span>
            <button class="btn ghost tiny" id="copyMatchBtn" type="button">Copy match</button>
          </div>
        </div>

        <div class="field span2">
          <label>Motivation</label>
          <div class="motivation">
            <div class="motBox">
              <div class="motK">Personal best (this setup)</div>
              <div class="motV" id="pbOut">‚Äî</div>
            </div>
            <div class="motBox">
              <div class="motK">Rounds completed (device)</div>
              <div class="motV" id="roundsOut">‚Äî</div>
            </div>
          </div>
        </div>
      </div>

      <details class="rules">
        <summary><b>How it works (tap)</b></summary>
        <ol>
          <li>Open the audio + paper for your chosen year.</li>
          <li>Answer 10 prompts (quick notes are fine).</li>
          <li>At Results, mark wrong answers at <b>insane speed</b> using the 10 big buttons.</li>
          <li>Score = time + penalties. Result Code is short for calling out in class.</li>
        </ol>
      </details>

      <p class="copyright">
        ¬© Turbo Aural ‚Äî practice tool. External audio/papers remain the property of their owners.
      </p>
    </section>

    <!-- GAME -->
    <section class="card hidden" id="screenGame">
      <div class="gameHead">
        <div>
          <h2 id="gameTitle">Round</h2>
          <div class="meta">
            <span class="tag" id="tagMatch">Match: ‚Äî</span>
            <span class="tag" id="tagPenalty">Penalty: ‚Äî</span>
            <span class="tag" id="tagCap">Sprint cap: ‚Äî</span>
          </div>
        </div>

        <div class="gameRight">
          <div class="timer" id="timer">00:00.0</div>
          <div class="btnRow">
            <button class="btn soft" id="paperQuickBtn" type="button">Paper</button>
            <button class="btn soft" id="audioQuickBtn" type="button">Audio</button>
            <button class="btn ghost" id="quitBtn" type="button">Quit</button>
          </div>
        </div>
      </div>

      <div id="promptArea"></div>

      <div class="nav">
        <button class="btn ghost" id="prevBtn" type="button">Back</button>
        <button class="btn primary" id="nextBtn" type="button">Next</button>
        <button class="btn primary hidden" id="submitBtn" type="button">Submit</button>
      </div>

      <p class="hint center" id="modeHint"></p>
    </section>

    <!-- RESULTS -->
    <section class="card hidden" id="screenResults">
      <div class="cardHead">
        <h2>Results</h2>
        <p class="muted">Mark wrong answers fast. Blanks count as wrong automatically.</p>
      </div>

      <div class="stats">
        <div class="stat">
          <div class="k">Time</div>
          <div class="v" id="timeOut">00:00.0</div>
        </div>
        <div class="stat">
          <div class="k">Wrong</div>
          <div class="v" id="wrongOut">0</div>
        </div>
        <div class="stat">
          <div class="k">Score</div>
          <div class="v" id="scoreOut">0.0s</div>
        </div>
        <div class="stat">
          <div class="k">Result code</div>
          <div class="v code" id="codeOut">------</div>
        </div>
      </div>

      <div class="hr"></div>

      <div class="speedMark">
        <div class="speedTop">
          <h3>Insane-speed marking</h3>
          <p class="muted small">Tap a number to mark it wrong/right. (Wrong = red.)</p>
        </div>

        <div class="markGrid" id="markGrid"></div>

        <div class="btnRow">
          <button class="btn soft" id="allCorrectBtn" type="button">All correct</button>
          <button class="btn soft" id="blanksWrongBtn" type="button">Blanks ‚Üí wrong</button>
          <button class="btn ghost" id="expandBtn" type="button">Show answers</button>
        </div>
      </div>

      <div class="answers hidden" id="answersWrap"></div>

      <div class="hr"></div>

      <div class="btnRow">
        <button class="btn soft" id="copyBtn" type="button">Copy result</button>
        <button class="btn primary" id="playAgainBtn" type="button">Play again</button>
        <button class="btn ghost" id="homeBtn" type="button">Back to menu</button>
      </div>

      <div class="pbBanner hidden" id="pbBanner">üèÜ New Personal Best!</div>
    </section>
  </main>

  <script src="./script.js?v=TAURAL_CLEAN_2"></script>
</body>
</html>
